["support", "soprano", "samples"].each{|f| require "/Users/josephwilk/Workspace/repl-electric/sonic-pi/lib/#{f}"}

bar = 0.5

with_fx :lpf, cutoff: 50 do
live(:drums) do
  15.times do |n|
    sample :drum_bass_soft
    sleep bar/2.0
        
    if (n%4 == 0)
      sample csample("183102__dwsd__clp-bodacious.wav")
    end
    if n == 7
      sample csample("183102__dwsd__clp-bodacious.wav")
        sleep bar/4.0
        sample csample("183102__dwsd__clp-bodacious.wav")       
        sleep bar/4.0
    else
      sleep bar/2.0
    end
 #   sample :drum_snare_soft if n % 2 == 0
  end
  sample :drum_bass_soft
  sleep bar/2
  sample :drum_bass_soft
  sleep bar/2
  #sample :drum_bass_soft 
end
end

live :synths do |n|
  use_synth :beep
  with_fx :slicer, phase: bar do
  if n % 16 != 15
    play :D3
    sleep bar
  else
    play :D4
    sleep bar/2.0
    play :D3
    sleep bar/2.0
  end
  end
end

live :sins do |n|
  with_fx :reverb do
    use_synth :beep
    play :D4, release: bar*8, attack: 0.25, decay: bar*2, amp: 0.5
    sleep bar*8
    play :C4, release: bar*8, attack: 0.25, decay: bar*2, amp: 0.5
    sleep bar*8
    play :E4, release: bar*8, attack: 0.25, decay: bar*2, amp: 0.5   
    sleep bar*8
    play :F3, release: bar*8, attack: 0.25, decay: bar*2, amp: 0.5   
    sleep bar*8
  end
end

live :sins2 do |n|
  with_fx :echo do
    use_synth :prophet
    play :C2, release: bar*4, attack: 0.25, decay: bar*2, amp: 0.1
    sleep bar*8
  end
end