live_audio :livez2, input: 0

live_loop :testing do
  midi :E3, 10, port: :iac_driver_iac_bus_1, channel: 2, sustain: 0.8
  sleep 1
end

live_loop :iter, sync: :testing do
  tick
  midi (knit :E2,128, :A2, 128).look, (line 10, 127,128/2.0).look, port: :iac_driver_iac_bus_1, channel: 1
  sleep 1/4.0
end

live_loop :beat, sync: :testing do
  tick
  if(ring *%W{1 0 0 1   0 1 0 0}).look == "1"
    smp Mountain[/subkick/,1], amp: 0.1
  end
  sleep 1/4.0
end
